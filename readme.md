# Car Features, Price, and Popularity
## by Robert Bruton


## Dataset

The dataset I chose for analysis is the "Car Features and MSRP" dataset by CooperUnion on Kaggle. This dataset features 16 columns of variables for almost 12,000 rows of observations. The data was originally scraped from Edmunds and Twitter. This dataset can be found at: https://www.kaggle.com/CooperUnion/cardataset 


## Summary of Findings

The univariate analysis shows that the price variable had a wide range, with some values as low as 2,000 and some over 200,000. There are a lot of cars priced at the minimum point of 2,000, as well as a good number priced above 75,000 that are considered outliers. Ignoring the high outliers and those priced at the minimum, the rest of the prices are somewhat normally distributed with a median price of about 30,000 dollars. The high number of cars priced at the minimum is a bit unusual and would cause some strange distributions for the rest of the analysis so these have been dropped for neatness. The price values over 75,000 are outliers and have been deleted in the interest of keeping things neat as well. The dataset was also cleaned a little for quality issues of missing data points by removing any entries with missing data in any columns considered important. The data was also cleaned by changing the data types of the columns to more appropriate types. The majority of cars in the dataset have 4, 6, or 8 cylider engines with most having automatic transmissions but a decent number having manual transmissions. Very few cars have different numbers of cylinders or different types of transmissions from those. Most cars are 4-door models, with a good number of 2-door and a few 3-door models as well. Front wheel drive is most common, but the distribution of drive types is fairly balanced. Compact is the most common size, with slightly fewer midsize but a decent number of large as well. There are a large number of options for make in the dataset, but the distribution heavily favors the more common makes (duh). The top 5 most common are Chevrolet, Ford, Volkswagen, Toyota, and Dodge, in that order. By far the most common fuel type is regular unleaded with more than triple the count of the next most common. Premium unleaded fuel is the next most common, followed by flex fuel and diesel with alternatives such as electric and natural gas being pretty uncommon. Car body style has quite a few options, but sedans and 4-door SUVs are by far the most common with coupe being the next most common. The year variable ranges from 1990 to 2017 and is very right skewed with the majority of cars being 2015 or newer. Horespower has a skewed left bimodal distribution with modes a little under 200 and around 300. Both highway and city mpg are left skewed, likely by non-traditional fuel types, with mean highway around 26 and mean city around 18. The popularity variable has a weird distribution. It is left skewed and somewhat bimodal with most data falling in the range of 0-1000 or 1500-2200 and some higher values. There are very few cars older than 2001 models so I am going to drop any cars from 2000 or older.

From the bivariate analysis, the city and highway gas mileage have a strong correlation. The price is correlated most strongly with horsepower. Both city and highway gas mileage have inverse correlations with horsepower. Doing a log transform of the horsepower slightly incresed the strength of the correlation with gas mileage. Doing a log transform of price slightly increased the strength of the correlation with year and horsepower. Log transforms did not improve any other correlations and those it did improve were insignificant improvements. Many of the makes have rather large price ranges, some (with outliers included) span the entire dataset price range. There are also some makes that have very small price ranges, some on the high end some on the low end. The top 9 most common makes all have means on the lower end of the price range, while some of the least common makes have means on the very high end of the overall range. Overall, it does seem that make is fairly well correlated with price. Many of the body types have large price ranges, although some have smaller ranges. The more common body styles tend to have the largest range, whereas the less common body styles tend to have a small range. For the more common styles, body is not a good predictor of price due to the large ranges. However, with the less common styles, the body type will actually be a very good predictor of price. Fuel type seems that it may have some value as a predictor of price. Most fuel types have fairly large price ranges, but there does seem to be a trend that cars that take regular unleaded fuel are the cheapest. The distribution of price for diesel fuel type is pretty evenly distributed over the whole range, while the least common types (electric and natural gas) have very small price ranges. Most fuel types seem to have a right skewed distribution of price. The price range for most engine cylinder categories is large, although there is a trend for the mean to increase with more cylinders among the most common categories (4, 6, and 8). All the cars with 0 cylinders correspond with the electric fuel type. After dropping the high price outliers, there are very few cars with more than 8 cylinders. Transmission types seem to have pretty wide price ranges, although there is a pretty clear trend. Manual transmissions have lower pricing than automatics, and automated manuals are unlikely to be low priced. Direct drive transmission type corresponds with all the electric fuel type vehicles. All the categories associated with electric vehicles (electric fuel, 0 cylinders, direct drive transmission) have very similar ranges and bimodal distributions since they mostly contain the same set of vehicles. Drive type definitely seems to have a correlation with price. Front wheel drive, which is the most common, is also the cheapest. Rear wheel and four wheel drive are more mid priced, while all wheel drive vehicles tend to have the highest prices, although there is not a huge difference between the latter 3 categories. The price ranges for all of these are pretty large, but the means and distrubutions follow the stated trend. Number of doors does not seem to have much correlation with price. Price distribution by vehicle size has large ranges for all categories, but there seems to be a trend for increasing vehicle size to correspond with increasing price in general.

For the multivariate analysis, I first looked at price vs horsepower by production year. Price and horsepower have a fairly obvious linear correlation that is consistent across the range of years. This led to some feature engineering where I added a column of the ratio between price and horsepower called PPP (price per power). Looking at the mean of this PPP ratio over production years, as well as the mean price and mean horsepower, shows that the PPP ratio is pretty consistent over the years range, with a slight increase overall. The means of horspower and price show a very consistent linear inrease over the years range with similar rates of increase leading to the nearly constant mean ppp. Looking at the highway, city, and the average of these, combined MPG, shows an overall trend of increasing fuel economy over the years. This increase in the fuel economy for different driving conditions is balanced and the mean ratio of highway/city MPG is nearly constant over the year range. Analysis of the fuel economy lead to another engineered feature, the ratio of combined fuel economy to horsepower (MPG/HP). Plotting the mean of this MPG/HP feature vs production year shows a fairly constant ratio. Looking at the MPG/HP over time by categorical variables shows that the MPG/HP is higher for smaller cars with less cylinders and also varies with fuel type, where premium and flex fuel have the lowest ratios. Comparing the MPG/HP with vehicle make shows an interesting trend where many European and Asian makes tend to have higher ratios (more efficient) while American makes, as well as more performance/luxury oriented makes, tend to have lower ratios (less efficient). After looking at these engineered ratio features, I shifted back to looking at some point plots of price vs multiple categorical variables. When grouping by number of cylinders and varying the other categoricals, we see that increases in number of cylinders and increasing vehicle size increase the price. The fuel type and transmission type tend to have a noticeable effect on the price as well with cars runnin on regular unleaded or flex fuel being cheaper while cars running on premium unleaded or diesel are more expensive. Similarly, 4 and 6 cylinder vehicles tend to be cheaper with automatic transmissions and 8 cylinder vehicles tend to be cheapest with manual transmissions, while automated manual transmissions seem to be most expensive for all engine sizes. When plotting price by make and varying the other categorical variables, we see very similar patterns except for the effects of transmission type. When sorting by make, we see that automated manuals are not usually the most expensive transmission type, this difference compared to looking at transmission type for all makes combined is likely due to the more expensive car makes usually having automated manual transmissions which skews the mean price up.


## Key Insights for Presentation

The first visualization for my presentation is the distribution of the price variable. For this, I used both a histogram and a boxplot. I adapted the original plots from my exploratory analysis to make more polished versions for explanatory analysis. I changed the bins and added a chart title and axis labels for the histogram. For the boxplot I switched from a matplotlib boxplot to a seaborn one and added a chart title and x-axis label.
The next visualization in my presentation is a scatterplot of price vs horsepower. This plot was adapted from my multivariate analysis by improving axis labels, adding a chart title, and resizing the plot.
